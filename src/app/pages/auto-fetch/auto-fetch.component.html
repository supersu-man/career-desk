<div class="d-flex flex-column w-100 h-100 overflow-auto p-3">
    <div class="d-flex align-items-center justify-content-between mb-4">
        <div class="d-flex align-items-center gap-2">
            <h2 class="mb-0">Newly Found Job Postings</h2>
        </div>
        @if (jobsService.newJobs().length > 0) {
        <button mat-button color="warn" (click)="clearAll()">
            <span class="material-symbols-rounded me-1">delete_sweep</span>
            Clear All
        </button>
        }
    </div>
    <div class="d-flex align-items-center gap-3">
        <mat-slide-toggle [ngModel]="autoFetchEnabled()" class="mb-4"
            (ngModelChange)="onAutoFetchToggle($event)" color="primary">
            Enable Auto-Fetch (Background)
        </mat-slide-toggle>

        <mat-form-field appearance="outline" class="mb-0 no-subscript" style="width: 150px;">
            <mat-label>Interval</mat-label>
            <mat-select [ngModel]="autoFetchInterval()"
                (ngModelChange)="onIntervalChange($event)">
                @for (int of autoFetchIntervals; track int.value) {
                <mat-option [value]="int.value">{{ int.label }}</mat-option>
                }
            </mat-select>
        </mat-form-field>
    </div>

    @if (jobsService.newJobs().length === 0) {
    <div class="flex-grow-1 d-flex flex-column align-items-center justify-content-center text-muted">
        <span class="material-symbols-rounded fs-1 mb-2">work_off</span>
        <p>No new job postings found recently.</p>
    </div>
    } @else {
    <div class="row g-3">
        @for (job of jobsService.newJobs(); track job.url) {
        <div class="col-12 col-md-6 col-lg-4">
            <app-job-card [job]="job" (onSave)="jobsService.toggleSaveJob(job)" (onApply)="jobsService.applyJob(job)"
                (onBrowser)="openInBrowser(job.url)"></app-job-card>
        </div>
        }
    </div>
    }
</div>